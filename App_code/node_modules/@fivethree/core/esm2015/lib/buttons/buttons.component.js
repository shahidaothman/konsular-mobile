/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { FivPopover } from './../popover/popover.component';
import { Platform, PopoverController, ActionSheetController } from '@ionic/angular';
import { Component, Input, ContentChildren, QueryList } from '@angular/core';
import { FivButton } from '../button/button.component';
export class FivButtons {
    /**
     * @param {?} platform
     * @param {?} popoverController
     * @param {?} actionSheetController
     */
    constructor(platform, popoverController, actionSheetController) {
        this.platform = platform;
        this.popoverController = popoverController;
        this.actionSheetController = actionSheetController;
        this.slot = 'end';
        this.icon = 'more';
        this.count = 0;
        this.forceActionsheet = false;
        this.forcePopover = false;
        this.iconsOnly = true;
    }
    /**
     * @return {?}
     */
    ngOnInit() { }
    /**
     * @return {?}
     */
    ngAfterContentInit() { }
    /**
     * @param {?} event
     * @return {?}
     */
    onMenuClicked(event) {
        if (this.forceActionsheet) {
            this.presentActionSheet(event);
            return;
        }
        if (this.forcePopover) {
            this.presentPopover(event);
            return;
        }
        if (this.platform.is('mobile')) {
            this.presentActionSheet(event);
        }
        else {
            this.presentPopover(event);
        }
    }
    /**
     * @param {?} ev
     * @return {?}
     */
    presentPopover(ev) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            /** @type {?} */
            const popover = yield this.popoverController.create({
                component: FivPopover,
                event: ev,
                translucent: false,
                componentProps: {
                    buttons: this.buttons
                        .toArray()
                        .slice(this.count)
                        .filter((/**
                     * @param {?} button
                     * @return {?}
                     */
                    button => !button.disabled))
                }
            });
            yield popover.present();
            /** @type {?} */
            const result = yield popover.onDidDismiss();
            if (result &&
                result.data &&
                (result.data.index || result.data.index === 0)) {
                this.onButtonClicked(result.data.index + this.count);
            }
        });
    }
    /**
     * @param {?} ev
     * @return {?}
     */
    presentActionSheet(ev) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            /** @type {?} */
            const buttons = [];
            this.buttons
                .toArray()
                .slice(this.count)
                .forEach((/**
             * @param {?} button
             * @param {?} index
             * @return {?}
             */
            (button, index) => {
                if (!button.disabled) {
                    buttons.push({
                        text: button.text,
                        icon: button.icon,
                        handler: (/**
                         * @return {?}
                         */
                        () => {
                            this.onButtonClicked(this.count + index);
                        })
                    });
                }
            }));
            /** @type {?} */
            const actionSheet = yield this.actionSheetController.create({
                header: this.header,
                subHeader: this.subHeader,
                buttons: buttons
            });
            yield actionSheet.present();
        });
    }
    /**
     * @param {?} i
     * @return {?}
     */
    onButtonClicked(i) {
        this.buttons.toArray()[i].click.emit();
    }
}
FivButtons.decorators = [
    { type: Component, args: [{
                selector: 'fiv-buttons',
                template: "<ion-buttons *ngIf=\"buttons\" [slot]=\"slot\">\n\n  <fiv-button [color]=\"color\" *ngIf=\"(slot === 'start' || slot ==='primary') && count < buttons.length && text\"\n    (click)=\"onMenuClicked($event)\" [text]=\"text\"></fiv-button>\n\n  <fiv-button [color]=\"color\" *ngIf=\"(slot === 'start' || slot ==='primary') && count < buttons.length && !text\"\n    (click)=\"onMenuClicked($event)\" [icon]=\"'md-more'\"></fiv-button>\n  <ng-container *ngIf=\"iconsOnly\">\n    <fiv-button [color]=\"button.color\" (click)=\"onButtonClicked(i)\" [icon]=\"button.icon\"\n      *ngFor=\"let button of buttons.toArray() |\u00A0slice:0:count; let i = index;\"></fiv-button>\n  </ng-container>\n  <ng-container *ngIf=\"!iconsOnly\">\n    <fiv-button [color]=\"button.color\" (click)=\"onButtonClicked(i)\" [icon]=\"button.icon\" [text]=\"button.text\"\n      *ngFor=\"let button of buttons.toArray() |\u00A0slice:0:count; let i = index;\"></fiv-button>\n  </ng-container>\n  <fiv-button [color]=\"color\" *ngIf=\"(slot === 'end' || slot ==='secondary') && count < buttons.length && !text\"\n    (click)=\"onMenuClicked($event)\" [icon]=\"icon\"></fiv-button>\n  <fiv-button [color]=\"color\" *ngIf=\"(slot === 'end' || slot ==='secondary') && count < buttons.length && text\"\n    (click)=\"onMenuClicked($event)\" [text]=\"text\"></fiv-button>\n</ion-buttons>",
                styles: [":host{display:block}"]
            }] }
];
/** @nocollapse */
FivButtons.ctorParameters = () => [
    { type: Platform },
    { type: PopoverController },
    { type: ActionSheetController }
];
FivButtons.propDecorators = {
    slot: [{ type: Input }],
    subHeader: [{ type: Input }],
    header: [{ type: Input }],
    icon: [{ type: Input }],
    text: [{ type: Input }],
    color: [{ type: Input }],
    count: [{ type: Input }],
    forceActionsheet: [{ type: Input }],
    forcePopover: [{ type: Input }],
    iconsOnly: [{ type: Input }],
    buttons: [{ type: ContentChildren, args: [FivButton,] }]
};
if (false) {
    /** @type {?} */
    FivButtons.prototype.slot;
    /** @type {?} */
    FivButtons.prototype.subHeader;
    /** @type {?} */
    FivButtons.prototype.header;
    /** @type {?} */
    FivButtons.prototype.icon;
    /** @type {?} */
    FivButtons.prototype.text;
    /** @type {?} */
    FivButtons.prototype.color;
    /** @type {?} */
    FivButtons.prototype.count;
    /** @type {?} */
    FivButtons.prototype.forceActionsheet;
    /** @type {?} */
    FivButtons.prototype.forcePopover;
    /** @type {?} */
    FivButtons.prototype.iconsOnly;
    /** @type {?} */
    FivButtons.prototype.buttons;
    /**
     * @type {?}
     * @private
     */
    FivButtons.prototype.platform;
    /**
     * @type {?}
     * @private
     */
    FivButtons.prototype.popoverController;
    /** @type {?} */
    FivButtons.prototype.actionSheetController;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9ucy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZml2ZXRocmVlL2NvcmUvIiwic291cmNlcyI6WyJsaWIvYnV0dG9ucy9idXR0b25zLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUM1RCxPQUFPLEVBQ0wsUUFBUSxFQUNSLGlCQUFpQixFQUNqQixxQkFBcUIsRUFDdEIsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQ0wsU0FBUyxFQUVULEtBQUssRUFDTCxlQUFlLEVBQ2YsU0FBUyxFQUVWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQU92RCxNQUFNLE9BQU8sVUFBVTs7Ozs7O0lBYXJCLFlBQ1UsUUFBa0IsRUFDbEIsaUJBQW9DLEVBQ3JDLHFCQUE0QztRQUYzQyxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2xCLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFDckMsMEJBQXFCLEdBQXJCLHFCQUFxQixDQUF1QjtRQWY1QyxTQUFJLEdBQUcsS0FBSyxDQUFDO1FBR2IsU0FBSSxHQUFHLE1BQU0sQ0FBQztRQUdkLFVBQUssR0FBRyxDQUFDLENBQUM7UUFDVixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFDekIsaUJBQVksR0FBRyxLQUFLLENBQUM7UUFDckIsY0FBUyxHQUFHLElBQUksQ0FBQztJQU92QixDQUFDOzs7O0lBRUosUUFBUSxLQUFJLENBQUM7Ozs7SUFFYixrQkFBa0IsS0FBVSxDQUFDOzs7OztJQUU3QixhQUFhLENBQUMsS0FBSztRQUNqQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUN6QixJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDL0IsT0FBTztTQUNSO1FBQ0QsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDM0IsT0FBTztTQUNSO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUM5QixJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDaEM7YUFBTTtZQUNMLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDNUI7SUFDSCxDQUFDOzs7OztJQUVLLGNBQWMsQ0FBQyxFQUFPOzs7a0JBQ3BCLE9BQU8sR0FBRyxNQUFNLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUM7Z0JBQ2xELFNBQVMsRUFBRSxVQUFVO2dCQUNyQixLQUFLLEVBQUUsRUFBRTtnQkFDVCxXQUFXLEVBQUUsS0FBSztnQkFDbEIsY0FBYyxFQUFFO29CQUNkLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTzt5QkFDbEIsT0FBTyxFQUFFO3lCQUNULEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO3lCQUNqQixNQUFNOzs7O29CQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFDO2lCQUN0QzthQUNGLENBQUM7WUFFRixNQUFNLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQzs7a0JBQ2xCLE1BQU0sR0FBRyxNQUFNLE9BQU8sQ0FBQyxZQUFZLEVBQUU7WUFDM0MsSUFDRSxNQUFNO2dCQUNOLE1BQU0sQ0FBQyxJQUFJO2dCQUNYLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLEVBQzlDO2dCQUNBLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ3REO1FBQ0gsQ0FBQztLQUFBOzs7OztJQUVLLGtCQUFrQixDQUFDLEVBQU87OztrQkFDeEIsT0FBTyxHQUFHLEVBQUU7WUFDbEIsSUFBSSxDQUFDLE9BQU87aUJBQ1QsT0FBTyxFQUFFO2lCQUNULEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO2lCQUNqQixPQUFPOzs7OztZQUFDLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFO2dCQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRTtvQkFDcEIsT0FBTyxDQUFDLElBQUksQ0FBQzt3QkFDWCxJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUk7d0JBQ2pCLElBQUksRUFBRSxNQUFNLENBQUMsSUFBSTt3QkFDakIsT0FBTzs7O3dCQUFFLEdBQUcsRUFBRTs0QkFDWixJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUM7d0JBQzNDLENBQUMsQ0FBQTtxQkFDRixDQUFDLENBQUM7aUJBQ0o7WUFDSCxDQUFDLEVBQUMsQ0FBQzs7a0JBQ0MsV0FBVyxHQUFHLE1BQU0sSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQztnQkFDMUQsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNO2dCQUNuQixTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7Z0JBQ3pCLE9BQU8sRUFBRSxPQUFPO2FBQ2pCLENBQUM7WUFDRixNQUFNLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUM5QixDQUFDO0tBQUE7Ozs7O0lBRUQsZUFBZSxDQUFDLENBQVM7UUFDdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDekMsQ0FBQzs7O1lBOUZGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsYUFBYTtnQkFDdkIsazFDQUF1Qzs7YUFFeEM7Ozs7WUFsQkMsUUFBUTtZQUNSLGlCQUFpQjtZQUNqQixxQkFBcUI7OzttQkFrQnBCLEtBQUs7d0JBQ0wsS0FBSztxQkFDTCxLQUFLO21CQUNMLEtBQUs7bUJBQ0wsS0FBSztvQkFDTCxLQUFLO29CQUNMLEtBQUs7K0JBQ0wsS0FBSzsyQkFDTCxLQUFLO3dCQUNMLEtBQUs7c0JBQ0wsZUFBZSxTQUFDLFNBQVM7Ozs7SUFWMUIsMEJBQXNCOztJQUN0QiwrQkFBMkI7O0lBQzNCLDRCQUF3Qjs7SUFDeEIsMEJBQXVCOztJQUN2QiwwQkFBc0I7O0lBQ3RCLDJCQUF1Qjs7SUFDdkIsMkJBQW1COztJQUNuQixzQ0FBa0M7O0lBQ2xDLGtDQUE4Qjs7SUFDOUIsK0JBQTBCOztJQUMxQiw2QkFBMEQ7Ozs7O0lBR3hELDhCQUEwQjs7Ozs7SUFDMUIsdUNBQTRDOztJQUM1QywyQ0FBbUQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGaXZQb3BvdmVyIH0gZnJvbSAnLi8uLi9wb3BvdmVyL3BvcG92ZXIuY29tcG9uZW50JztcbmltcG9ydCB7XG4gIFBsYXRmb3JtLFxuICBQb3BvdmVyQ29udHJvbGxlcixcbiAgQWN0aW9uU2hlZXRDb250cm9sbGVyXG59IGZyb20gJ0Bpb25pYy9hbmd1bGFyJztcbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgT25Jbml0LFxuICBJbnB1dCxcbiAgQ29udGVudENoaWxkcmVuLFxuICBRdWVyeUxpc3QsXG4gIEFmdGVyQ29udGVudEluaXRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGaXZCdXR0b24gfSBmcm9tICcuLi9idXR0b24vYnV0dG9uLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Zpdi1idXR0b25zJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2J1dHRvbnMuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9idXR0b25zLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgRml2QnV0dG9ucyBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJDb250ZW50SW5pdCB7XG4gIEBJbnB1dCgpIHNsb3QgPSAnZW5kJztcbiAgQElucHV0KCkgc3ViSGVhZGVyOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGhlYWRlcjogc3RyaW5nO1xuICBASW5wdXQoKSBpY29uID0gJ21vcmUnO1xuICBASW5wdXQoKSB0ZXh0OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbG9yOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvdW50ID0gMDtcbiAgQElucHV0KCkgZm9yY2VBY3Rpb25zaGVldCA9IGZhbHNlO1xuICBASW5wdXQoKSBmb3JjZVBvcG92ZXIgPSBmYWxzZTtcbiAgQElucHV0KCkgaWNvbnNPbmx5ID0gdHJ1ZTtcbiAgQENvbnRlbnRDaGlsZHJlbihGaXZCdXR0b24pIGJ1dHRvbnM6IFF1ZXJ5TGlzdDxGaXZCdXR0b24+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcGxhdGZvcm06IFBsYXRmb3JtLFxuICAgIHByaXZhdGUgcG9wb3ZlckNvbnRyb2xsZXI6IFBvcG92ZXJDb250cm9sbGVyLFxuICAgIHB1YmxpYyBhY3Rpb25TaGVldENvbnRyb2xsZXI6IEFjdGlvblNoZWV0Q29udHJvbGxlclxuICApIHt9XG5cbiAgbmdPbkluaXQoKSB7fVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpOiB2b2lkIHt9XG5cbiAgb25NZW51Q2xpY2tlZChldmVudCkge1xuICAgIGlmICh0aGlzLmZvcmNlQWN0aW9uc2hlZXQpIHtcbiAgICAgIHRoaXMucHJlc2VudEFjdGlvblNoZWV0KGV2ZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuZm9yY2VQb3BvdmVyKSB7XG4gICAgICB0aGlzLnByZXNlbnRQb3BvdmVyKGV2ZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMucGxhdGZvcm0uaXMoJ21vYmlsZScpKSB7XG4gICAgICB0aGlzLnByZXNlbnRBY3Rpb25TaGVldChldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJlc2VudFBvcG92ZXIoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByZXNlbnRQb3BvdmVyKGV2OiBhbnkpIHtcbiAgICBjb25zdCBwb3BvdmVyID0gYXdhaXQgdGhpcy5wb3BvdmVyQ29udHJvbGxlci5jcmVhdGUoe1xuICAgICAgY29tcG9uZW50OiBGaXZQb3BvdmVyLFxuICAgICAgZXZlbnQ6IGV2LFxuICAgICAgdHJhbnNsdWNlbnQ6IGZhbHNlLFxuICAgICAgY29tcG9uZW50UHJvcHM6IHtcbiAgICAgICAgYnV0dG9uczogdGhpcy5idXR0b25zXG4gICAgICAgICAgLnRvQXJyYXkoKVxuICAgICAgICAgIC5zbGljZSh0aGlzLmNvdW50KVxuICAgICAgICAgIC5maWx0ZXIoYnV0dG9uID0+ICFidXR0b24uZGlzYWJsZWQpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhd2FpdCBwb3BvdmVyLnByZXNlbnQoKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb3BvdmVyLm9uRGlkRGlzbWlzcygpO1xuICAgIGlmIChcbiAgICAgIHJlc3VsdCAmJlxuICAgICAgcmVzdWx0LmRhdGEgJiZcbiAgICAgIChyZXN1bHQuZGF0YS5pbmRleCB8fCByZXN1bHQuZGF0YS5pbmRleCA9PT0gMClcbiAgICApIHtcbiAgICAgIHRoaXMub25CdXR0b25DbGlja2VkKHJlc3VsdC5kYXRhLmluZGV4ICsgdGhpcy5jb3VudCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcHJlc2VudEFjdGlvblNoZWV0KGV2OiBhbnkpIHtcbiAgICBjb25zdCBidXR0b25zID0gW107XG4gICAgdGhpcy5idXR0b25zXG4gICAgICAudG9BcnJheSgpXG4gICAgICAuc2xpY2UodGhpcy5jb3VudClcbiAgICAgIC5mb3JFYWNoKChidXR0b24sIGluZGV4KSA9PiB7XG4gICAgICAgIGlmICghYnV0dG9uLmRpc2FibGVkKSB7XG4gICAgICAgICAgYnV0dG9ucy5wdXNoKHtcbiAgICAgICAgICAgIHRleHQ6IGJ1dHRvbi50ZXh0LFxuICAgICAgICAgICAgaWNvbjogYnV0dG9uLmljb24sXG4gICAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMub25CdXR0b25DbGlja2VkKHRoaXMuY291bnQgKyBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIGNvbnN0IGFjdGlvblNoZWV0ID0gYXdhaXQgdGhpcy5hY3Rpb25TaGVldENvbnRyb2xsZXIuY3JlYXRlKHtcbiAgICAgIGhlYWRlcjogdGhpcy5oZWFkZXIsXG4gICAgICBzdWJIZWFkZXI6IHRoaXMuc3ViSGVhZGVyLFxuICAgICAgYnV0dG9uczogYnV0dG9uc1xuICAgIH0pO1xuICAgIGF3YWl0IGFjdGlvblNoZWV0LnByZXNlbnQoKTtcbiAgfVxuXG4gIG9uQnV0dG9uQ2xpY2tlZChpOiBudW1iZXIpIHtcbiAgICB0aGlzLmJ1dHRvbnMudG9BcnJheSgpW2ldLmNsaWNrLmVtaXQoKTtcbiAgfVxufVxuIl19