/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { FivAppBarTabContent } from './app-bar-tab-content/app-bar-tab-content.component';
import { FivFab } from './../fab/fab.component';
import { Component, Input, ViewChild, Output, EventEmitter, ContentChildren, QueryList, Host, ViewChildren } from '@angular/core';
import { FivAppBarTab } from './app-bar-tab/app-bar-tab.component';
import { Router } from '@angular/router';
import { IonTabs } from '@ionic/angular';
var FivAppBar = /** @class */ (function () {
    function FivAppBar(router, tabs) {
        this.router = router;
        this.tabs = tabs;
        this._fabVisible = true;
        this.cutoutVisible = true;
        this.left = false;
        this.right = false;
        this.transitioning = false;
        this.icon = 'md-add';
        this.titleLayout = 'hide';
        this.fivFabClick = new EventEmitter();
    }
    Object.defineProperty(FivAppBar.prototype, "position", {
        get: /**
         * @return {?}
         */
        function () {
            return this._position;
        },
        set: /**
         * @param {?} position
         * @return {?}
         */
        function (position) {
            if (!position) {
                return;
            }
            if (!this.fabVisible) {
                this._position = position;
                this.setPosition();
                return;
            }
            this._fabVisible = false;
            this.transitioning = true;
            if (!this._position) {
                this._position = position;
                this.onFabHidden();
                return;
            }
            this.prepareTabs(position);
            this._position = position;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FivAppBar.prototype, "fabVisible", {
        get: /**
         * @return {?}
         */
        function () {
            return this._fabVisible;
        },
        set: /**
         * @param {?} fabVisible
         * @return {?}
         */
        function (fabVisible) {
            var _this = this;
            if (this._fabVisible === true && fabVisible === false) {
                this._fabVisible = false;
            }
            else if (this._fabVisible === false && fabVisible === true) {
                this.cutoutVisible = true;
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this._fabVisible = true;
                }), 250);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FivAppBar.prototype.ngOnInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    FivAppBar.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    FivAppBar.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        this.prepareTabs(this.position);
    };
    /**
     * @return {?}
     */
    FivAppBar.prototype.onFabHidden = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.transitioning) {
            this.setPosition();
            this.cutoutVisible = false;
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.cutoutVisible = true;
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this._fabVisible = true;
                    _this.transitioning = false;
                }), 225);
            }), 225);
        }
        else {
            this.cutoutVisible = false;
        }
    };
    /**
     * @private
     * @param {?} position
     * @return {?}
     */
    FivAppBar.prototype.prepareTabs = /**
     * @private
     * @param {?} position
     * @return {?}
     */
    function (position) {
        if (position === 'center') {
            this.tabsLeft = this.tabComponents.toArray().slice(0, 2);
            this.tabsRight = this.tabComponents.toArray().slice(2, 4);
        }
        else if (position === 'right') {
            this.tabsLeft = this.tabComponents.toArray();
            this.tabsRight = [];
        }
        else if (position === 'left') {
            this.tabsLeft = [];
            this.tabsRight = this.tabComponents.toArray();
        }
    };
    /**
     * @private
     * @return {?}
     */
    FivAppBar.prototype.setPosition = /**
     * @private
     * @return {?}
     */
    function () {
        if (this._position === 'right') {
            this.right = true;
            this.left = false;
        }
        else if (this._position === 'left') {
            this.right = false;
            this.left = true;
        }
        else {
            this.right = false;
            this.left = false;
        }
    };
    /**
     * @return {?}
     */
    FivAppBar.prototype.fabClick = /**
     * @return {?}
     */
    function () {
        this.fivFabClick.emit(this);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FivAppBar.prototype.ionTabButtonClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.tabs.select(event.tab);
    };
    FivAppBar.decorators = [
        { type: Component, args: [{
                    selector: 'fiv-app-bar',
                    template: "<div class=\"appbar\" [ngClass]=\"{'cutout': cutoutVisible, 'left': left, 'right': right}\">\n  <div class=\"appbar-rect left\">\n    <div class=\"tabs\">\n      <fiv-app-bar-tab-content (ionTabButtonClick)=\"ionTabButtonClick($event)\" [active]=\"router.url.endsWith(tab.href)\"\n        [tab]=\"tab.tab\" [href]=\"tab.href\" [name]=\"tab.name\" [icon]=\"tab.icon\" [badge]=\"tab.badge\"\n        [titleLayout]=\"titleLayout\" *ngFor=\"let tab of tabsLeft\"></fiv-app-bar-tab-content>\n    </div>\n  </div>\n  <fiv-fab [scroll]=\"false\" (fivHidden)=\"onFabHidden()\" [visible]=\"_fabVisible\" #fab (click)=\"fabClick()\">\n    <fiv-icon [name]=\"icon\"></fiv-icon>\n  </fiv-fab>\n  <div class=\"rect\"></div>\n  <div class=\"rect-filler\"></div>\n  <div class=\"appbar-rect right\">\n    <div class=\"tabs\">\n      <fiv-app-bar-tab-content (ionTabButtonClick)=\"ionTabButtonClick($event)\" [active]=\"router.url.endsWith(tab.href)\"\n        [tab]=\"tab.tab\" [href]=\"tab.href\" [name]=\"tab.name\" [icon]=\"tab.icon\" [badge]=\"tab.badge\"\n        [titleLayout]=\"titleLayout\" *ngFor=\"let tab of tabsRight\"></fiv-app-bar-tab-content>\n    </div>\n  </div>\n</div>",
                    styles: [":host{--fiv-color-appbar:var(--ion-color-light);--fiv-color-fab:var(--ion-color-primary)}.appbar{width:100%;position:fixed;bottom:0;left:0;height:calc(84px + env(safe-area-inset-bottom));background:rgba(0,0,0,0);z-index:5000}.appbar .appbar-rect{position:absolute;width:calc(50% - 34px);height:calc(56px + env(safe-area-inset-bottom));bottom:0;box-shadow:3px -4px 5px 0 rgba(0,0,0,.1);transition:350ms}.appbar .appbar-rect.left{left:0;background:var(--fiv-color-appbar);border-top-right-radius:12px}.appbar .appbar-rect.right{right:0;background:var(--fiv-color-appbar);border-top-left-radius:12px}.appbar fiv-fab{display:block;width:56px;height:56px;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;position:absolute;z-index:14}.appbar fiv-fab fiv-icon{--fiv-color-icon:var(--fiv-color-fab-icon)}.appbar .rect{display:inline-block;width:68px;height:48px;position:absolute;overflow:hidden;bottom:env(safe-area-inset-bottom);left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);transition:350ms}.appbar .rect-filler{display:inline-block;width:72px;height:env(safe-area-inset-bottom);position:absolute;overflow:hidden;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);transition:350ms;background:var(--fiv-color-appbar)}.appbar .rect:before{content:'';position:absolute;bottom:50%;width:100%;height:100%;border-radius:100%;box-shadow:0 300px 0 300px var(--fiv-color-appbar);transition:350ms}.appbar:not(.cutout) .appbar-rect.left{border-top-right-radius:0}.appbar:not(.cutout) .appbar-rect.right{border-top-left-radius:0}.appbar:not(.cutout) .rect{height:56px;box-shadow:3px -4px 5px 0 rgba(0,0,0,.1);background:var(--fiv-color-appbar)}.appbar:not(.cutout) .rect:before{border-radius:0;bottom:100%}.appbar.left .appbar-rect.left{width:4px}.appbar.left .appbar-rect.right{width:calc(100% - 70px)}.appbar.left .rect{left:4px;-webkit-transform:translateX(0);transform:translateX(0);width:66px}.appbar.left fiv-fab{width:56px;height:56px;-webkit-transform:translateX(0);transform:translateX(0);left:10px;position:absolute}.appbar.right .appbar-rect.left{width:calc(100% - 70px)}.appbar.right .appbar-rect.right{width:4px}.appbar.right .rect{left:calc(100% - 37px);width:67px}.appbar.right fiv-fab{width:56px;height:56px;-webkit-transform:translateX(0);transform:translateX(0);left:calc(100% - 64px);position:absolute;--fiv-spinner-size:68px}.tabs{display:flex;width:100%;height:100%;position:relative}"]
                }] }
    ];
    /** @nocollapse */
    FivAppBar.ctorParameters = function () { return [
        { type: Router },
        { type: IonTabs, decorators: [{ type: Host }] }
    ]; };
    FivAppBar.propDecorators = {
        fab: [{ type: ViewChild, args: ['fab',] }],
        icon: [{ type: Input }],
        titleLayout: [{ type: Input }],
        fivFabClick: [{ type: Output }],
        _tabs: [{ type: ViewChildren, args: [FivAppBarTabContent,] }],
        tabComponents: [{ type: ContentChildren, args: [FivAppBarTab,] }],
        position: [{ type: Input }],
        fabVisible: [{ type: Input }]
    };
    return FivAppBar;
}());
export { FivAppBar };
if (false) {
    /** @type {?} */
    FivAppBar.prototype._fabVisible;
    /** @type {?} */
    FivAppBar.prototype.cutoutVisible;
    /** @type {?} */
    FivAppBar.prototype._position;
    /** @type {?} */
    FivAppBar.prototype.left;
    /** @type {?} */
    FivAppBar.prototype.right;
    /** @type {?} */
    FivAppBar.prototype.transitioning;
    /** @type {?} */
    FivAppBar.prototype.tabsRight;
    /** @type {?} */
    FivAppBar.prototype.tabsLeft;
    /** @type {?} */
    FivAppBar.prototype.fab;
    /** @type {?} */
    FivAppBar.prototype.icon;
    /** @type {?} */
    FivAppBar.prototype.titleLayout;
    /** @type {?} */
    FivAppBar.prototype.fivFabClick;
    /** @type {?} */
    FivAppBar.prototype._tabs;
    /** @type {?} */
    FivAppBar.prototype.tabComponents;
    /** @type {?} */
    FivAppBar.prototype.router;
    /** @type {?} */
    FivAppBar.prototype.tabs;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZml2ZXRocmVlL2NvcmUvIiwic291cmNlcyI6WyJsaWIvYXBwLWJhci9hcHAtYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0scURBQXFELENBQUM7QUFDMUYsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ2hELE9BQU8sRUFDTCxTQUFTLEVBRVQsS0FBSyxFQUNMLFNBQVMsRUFDVCxNQUFNLEVBQ04sWUFBWSxFQUNaLGVBQWUsRUFDZixTQUFTLEVBR1QsSUFBSSxFQUNKLFlBQVksRUFDYixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFDbkUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRXpDLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUd6QztJQWdFRSxtQkFBbUIsTUFBYyxFQUFpQixJQUFhO1FBQTVDLFdBQU0sR0FBTixNQUFNLENBQVE7UUFBaUIsU0FBSSxHQUFKLElBQUksQ0FBUztRQTFEL0QsZ0JBQVcsR0FBRyxJQUFJLENBQUM7UUFDbkIsa0JBQWEsR0FBRyxJQUFJLENBQUM7UUFFckIsU0FBSSxHQUFHLEtBQUssQ0FBQztRQUNiLFVBQUssR0FBRyxLQUFLLENBQUM7UUFDZCxrQkFBYSxHQUFHLEtBQUssQ0FBQztRQUtiLFNBQUksR0FBRyxRQUFRLENBQUM7UUFDaEIsZ0JBQVcsR0FBc0IsTUFBTSxDQUFDO1FBQ3ZDLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQWEsQ0FBQztJQThDWSxDQUFDO0lBekNuRSxzQkFDSSwrQkFBUTs7OztRQXFCWjtZQUNFLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUN4QixDQUFDOzs7OztRQXhCRCxVQUNhLFFBQTJC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NUIsS0FBSzs2QkEwQkwsS0FBSzs7SUEyRVIsZ0JBQUM7Q0FBQSxBQTVIRCxJQTRIQztTQXZIWSxTQUFTOzs7SUFDcEIsZ0NBQW1COztJQUNuQixrQ0FBcUI7O0lBQ3JCLDhCQUE2Qjs7SUFDN0IseUJBQWE7O0lBQ2IsMEJBQWM7O0lBQ2Qsa0NBQXNCOztJQUN0Qiw4QkFBMEI7O0lBQzFCLDZCQUF5Qjs7SUFFekIsd0JBQThCOztJQUM5Qix5QkFBeUI7O0lBQ3pCLGdDQUFpRDs7SUFDakQsZ0NBQXNEOztJQUN0RCwwQkFBeUU7O0lBRXpFLGtDQUFzRTs7SUEyQzFELDJCQUFxQjs7SUFBRSx5QkFBNEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGaXZBcHBCYXJUYWJDb250ZW50IH0gZnJvbSAnLi9hcHAtYmFyLXRhYi1jb250ZW50L2FwcC1iYXItdGFiLWNvbnRlbnQuY29tcG9uZW50JztcbmltcG9ydCB7IEZpdkZhYiB9IGZyb20gJy4vLi4vZmFiL2ZhYi5jb21wb25lbnQnO1xuaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBPbkluaXQsXG4gIElucHV0LFxuICBWaWV3Q2hpbGQsXG4gIE91dHB1dCxcbiAgRXZlbnRFbWl0dGVyLFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIFF1ZXJ5TGlzdCxcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQWZ0ZXJDb250ZW50SW5pdCxcbiAgSG9zdCxcbiAgVmlld0NoaWxkcmVuXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRml2QXBwQmFyVGFiIH0gZnJvbSAnLi9hcHAtYmFyLXRhYi9hcHAtYmFyLXRhYi5jb21wb25lbnQnO1xuaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEFwcEJhclRpdGxlTGF5b3V0LCBBcHBCYXJGYWJQb3NpdGlvbiB9IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgSW9uVGFicyB9IGZyb20gJ0Bpb25pYy9hbmd1bGFyJztcbmltcG9ydCB7IFRhYkJ1dHRvbkNsaWNrRXZlbnREZXRhaWwgfSBmcm9tICdAaW9uaWMvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Zpdi1hcHAtYmFyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2FwcC1iYXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9hcHAtYmFyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgRml2QXBwQmFyIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBBZnRlckNvbnRlbnRJbml0IHtcbiAgX2ZhYlZpc2libGUgPSB0cnVlO1xuICBjdXRvdXRWaXNpYmxlID0gdHJ1ZTtcbiAgX3Bvc2l0aW9uOiBBcHBCYXJGYWJQb3NpdGlvbjtcbiAgbGVmdCA9IGZhbHNlO1xuICByaWdodCA9IGZhbHNlO1xuICB0cmFuc2l0aW9uaW5nID0gZmFsc2U7XG4gIHRhYnNSaWdodDogRml2QXBwQmFyVGFiW107XG4gIHRhYnNMZWZ0OiBGaXZBcHBCYXJUYWJbXTtcblxuICBAVmlld0NoaWxkKCdmYWInKSBmYWI6IEZpdkZhYjtcbiAgQElucHV0KCkgaWNvbiA9ICdtZC1hZGQnO1xuICBASW5wdXQoKSB0aXRsZUxheW91dDogQXBwQmFyVGl0bGVMYXlvdXQgPSAnaGlkZSc7XG4gIEBPdXRwdXQoKSBmaXZGYWJDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8Rml2QXBwQmFyPigpO1xuICBAVmlld0NoaWxkcmVuKEZpdkFwcEJhclRhYkNvbnRlbnQpIF90YWJzOiBRdWVyeUxpc3Q8Rml2QXBwQmFyVGFiQ29udGVudD47XG5cbiAgQENvbnRlbnRDaGlsZHJlbihGaXZBcHBCYXJUYWIpIHRhYkNvbXBvbmVudHM6IFF1ZXJ5TGlzdDxGaXZBcHBCYXJUYWI+O1xuXG4gIEBJbnB1dCgpXG4gIHNldCBwb3NpdGlvbihwb3NpdGlvbjogQXBwQmFyRmFiUG9zaXRpb24pIHtcbiAgICBpZiAoIXBvc2l0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmZhYlZpc2libGUpIHtcbiAgICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICB0aGlzLnNldFBvc2l0aW9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZmFiVmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IHRydWU7XG4gICAgaWYgKCF0aGlzLl9wb3NpdGlvbikge1xuICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgIHRoaXMub25GYWJIaWRkZW4oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wcmVwYXJlVGFicyhwb3NpdGlvbik7XG4gICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgfVxuICBnZXQgcG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IGZhYlZpc2libGUoZmFiVmlzaWJsZTogYm9vbGVhbikge1xuICAgIGlmICh0aGlzLl9mYWJWaXNpYmxlID09PSB0cnVlICYmIGZhYlZpc2libGUgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLl9mYWJWaXNpYmxlID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9mYWJWaXNpYmxlID09PSBmYWxzZSAmJiBmYWJWaXNpYmxlID09PSB0cnVlKSB7XG4gICAgICB0aGlzLmN1dG91dFZpc2libGUgPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuX2ZhYlZpc2libGUgPSB0cnVlO1xuICAgICAgfSwgMjUwKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGZhYlZpc2libGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZhYlZpc2libGU7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcm91dGVyOiBSb3V0ZXIsIEBIb3N0KCkgcHVibGljIHRhYnM6IElvblRhYnMpIHt9XG5cbiAgbmdPbkluaXQoKSB7fVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHt9XG5cbiAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgIHRoaXMucHJlcGFyZVRhYnModGhpcy5wb3NpdGlvbik7XG4gIH1cblxuICBvbkZhYkhpZGRlbigpIHtcbiAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nKSB7XG4gICAgICB0aGlzLnNldFBvc2l0aW9uKCk7XG5cbiAgICAgIHRoaXMuY3V0b3V0VmlzaWJsZSA9IGZhbHNlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuY3V0b3V0VmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2ZhYlZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgICB9LCAyMjUpO1xuICAgICAgfSwgMjI1KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXRvdXRWaXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwcmVwYXJlVGFicyhwb3NpdGlvbjogQXBwQmFyRmFiUG9zaXRpb24pIHtcbiAgICBpZiAocG9zaXRpb24gPT09ICdjZW50ZXInKSB7XG4gICAgICB0aGlzLnRhYnNMZWZ0ID0gdGhpcy50YWJDb21wb25lbnRzLnRvQXJyYXkoKS5zbGljZSgwLCAyKTtcbiAgICAgIHRoaXMudGFic1JpZ2h0ID0gdGhpcy50YWJDb21wb25lbnRzLnRvQXJyYXkoKS5zbGljZSgyLCA0KTtcbiAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICB0aGlzLnRhYnNMZWZ0ID0gdGhpcy50YWJDb21wb25lbnRzLnRvQXJyYXkoKTtcbiAgICAgIHRoaXMudGFic1JpZ2h0ID0gW107XG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICB0aGlzLnRhYnNMZWZ0ID0gW107XG4gICAgICB0aGlzLnRhYnNSaWdodCA9IHRoaXMudGFiQ29tcG9uZW50cy50b0FycmF5KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRQb3NpdGlvbigpIHtcbiAgICBpZiAodGhpcy5fcG9zaXRpb24gPT09ICdyaWdodCcpIHtcbiAgICAgIHRoaXMucmlnaHQgPSB0cnVlO1xuICAgICAgdGhpcy5sZWZ0ID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9wb3NpdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICB0aGlzLnJpZ2h0ID0gZmFsc2U7XG4gICAgICB0aGlzLmxlZnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJpZ2h0ID0gZmFsc2U7XG4gICAgICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmYWJDbGljaygpIHtcbiAgICB0aGlzLmZpdkZhYkNsaWNrLmVtaXQodGhpcyk7XG4gIH1cblxuICBpb25UYWJCdXR0b25DbGljayhldmVudDogVGFiQnV0dG9uQ2xpY2tFdmVudERldGFpbCkge1xuICAgIHRoaXMudGFicy5zZWxlY3QoZXZlbnQudGFiKTtcbiAgfVxufVxuIl19