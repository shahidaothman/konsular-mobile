{"version":3,"sources":["webpack:///./src/app/pages/payments/stripe/stripe.module.ts","webpack:///./src/app/pages/payments/stripe/stripe.page.html","webpack:///./src/app/pages/payments/stripe/stripe.page.scss","webpack:///./src/app/pages/payments/stripe/stripe.page.ts"],"names":[],"mappings":"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","file":"pages-payments-stripe-stripe-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { StripePage } from './stripe.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StripePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [StripePage]\n})\nexport class StripePageModule {}\n","module.exports = \"<ion-header hidenav-header>\\n  <ion-toolbar color=\\\"secondary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"home\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\" (click)=\\\"addNewCard()\\\">\\n      <ion-icon slot=\\\"md-add-circle\\\" name=\\\"md-add\\\"></ion-icon>\\n    </ion-buttons>\\n    <ion-title>\\n      Payment With Stripe\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <div class=\\\"div_content\\\">\\n    <div *ngIf=\\\"!cards?.length\\\">\\n      <p text-center>No Card Found Please Add Card</p>\\n    </div>\\n    <ion-radio-group>\\n      <ion-item class=\\\"div_inner\\\" no-lines *ngFor=\\\"let card of cards;let i = index\\\">\\n        <ion-thumbnail slot=\\\"end\\\">\\n          <img src=\\\"assets/images/visa.png\\\" class=\\\"img_visa\\\" />\\n          <!-- <ion-label>{{card.brand}}</ion-label> -->\\n        </ion-thumbnail>\\n        <ion-radio checked=\\\"{{ i == 0 ? 'true' : 'false' }}\\\" (ionSelect)=\\\"changeMethod(card.id)\\\" [value]=\\\"card.id\\\"\\n          slot=\\\"start\\\"></ion-radio>\\n        <ion-label>XXXX{{card.last4}} <br> Expiry {{card.exp_month}} / {{card.exp_year}}</ion-label>\\n      </ion-item>\\n    </ion-radio-group>\\n    <ion-button expand=\\\"block\\\" *ngIf=\\\"cards?.length\\\" class=\\\"btn_addcard\\\" (click)=\\\"payment()\\\">Pay $ {{price}}\\n    </ion-button>\\n\\n  </div>\\n</ion-content>\"","module.exports = \".btn_right {\\n  position: relative;\\n  z-index: 999999; }\\n\\n.img_menu {\\n  width: 17px;\\n  position: absolute;\\n  right: 20px; }\\n\\n.div_content {\\n  width: 100%;\\n  padding-left: 20px;\\n  padding-right: 20px; }\\n\\n.div_content .div_inner {\\n    width: 100%;\\n    margin-top: 15px;\\n    padding-bottom: 15px; }\\n\\n.div_content .div_inner .r {\\n      position: absolute;\\n      top: 50%;\\n      transform: translateY(-50%); }\\n\\n.div_content .div_inner .lbl_number {\\n      display: block;\\n      font-family: amazon-bold;\\n      font-size: 17px;\\n      color: gray;\\n      margin-left: 10px; }\\n\\n.div_content .div_inner .img_visa {\\n      float: right;\\n      position: absolute;\\n      top: 50%;\\n      display: block;\\n      font-family: amazon-bold;\\n      font-size: 17px;\\n      color: gray;\\n      margin-left: 10px;\\n      transform: translateY(-50%);\\n      height: 15px !important;\\n      width: 50px !important; }\\n\\n.btn_addcard {\\n  margin-top: 30px;\\n  --box-shadow: none !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90ZWNobGFiL3Byb2plY3QvdW5pamF5YS9pb25pYy9BcHBfU291cmNlX0NvZGUvQXBwX2NvZGUvc3JjL2FwcC9wYWdlcy9wYXltZW50cy9zdHJpcGUvc3RyaXBlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFrQjtFQUVsQixlQUFlLEVBQUE7O0FBRW5CO0VBQ0ksV0FBVztFQUNYLGtCQUFrQjtFQUNsQixXQUFXLEVBQUE7O0FBRWY7RUFDSSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLG1CQUFtQixFQUFBOztBQUh2QjtJQU1RLFdBQVc7SUFFWCxnQkFBZ0I7SUFDaEIsb0JBQW9CLEVBQUE7O0FBVDVCO01BWVksa0JBQWtCO01BQ2xCLFFBQVE7TUFDUiwyQkFBMkIsRUFBQTs7QUFkdkM7TUFpQlksY0FBYztNQUNkLHdCQUF3QjtNQUN4QixlQUFlO01BQ2YsV0FBVztNQUNYLGlCQUFpQixFQUFBOztBQXJCN0I7TUF3QlksWUFBWTtNQUNaLGtCQUFrQjtNQUNsQixRQUFRO01BQ1AsY0FBYztNQUNmLHdCQUF3QjtNQUN4QixlQUFlO01BQ2YsV0FBVztNQUNYLGlCQUFpQjtNQUNqQiwyQkFBMkI7TUFDM0IsdUJBQXVCO01BQ3ZCLHNCQUFzQixFQUFBOztBQUlqQztFQUNPLGdCQUFnQjtFQUNoQiw2QkFBYSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcGF5bWVudHMvc3RyaXBlL3N0cmlwZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuX3JpZ2h0e1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAvLyBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogOTk5OTk5O1xufVxuLmltZ19tZW51e1xuICAgIHdpZHRoOiAxN3B4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMjBweDtcbn1cbi5kaXZfY29udGVudHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgcGFkZGluZy1yaWdodDogMjBweDtcblxuICAgIC5kaXZfaW5uZXJ7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAvLyBib3JkZXItYm90dG9tOiAxcHggZGFzaGVkIGxpZ2h0Z3JheTtcbiAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG5cbiAgICAgICAgLnJ7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbiAgICAgICAgfVxuICAgICAgICAubGJsX251bWJlcntcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6IGFtYXpvbi1ib2xkO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxN3B4O1xuICAgICAgICAgICAgY29sb3I6IGdyYXk7XG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAuaW1nX3Zpc2F7XG4gICAgICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBhbWF6b24tYm9sZDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTdweDtcbiAgICAgICAgICAgIGNvbG9yOiBncmF5O1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG4gICAgICAgICAgICBoZWlnaHQ6IDE1cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgIHdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4gLmJ0bl9hZGRjYXJke1xuICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgICAtLWJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgICB9Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { Stripe } from '@ionic-native/stripe/ngx';\nimport { Http, Headers, RequestOptions } from '@angular/http';\nimport { Router } from '@angular/router';\nimport { InAppBrowserOptions, InAppBrowser } from '@ionic-native/in-app-browser/ngx';\nimport { UtilService } from 'src/app/providers/util.service';\n@Component({\n  selector: 'app-stripe',\n  templateUrl: './stripe.page.html',\n  styleUrls: ['./stripe.page.scss'],\n})\nexport class StripePage implements OnInit {\n  cards: any;\n  card_token: any = \"NA\";\n  isEnabled;\n  price: any;\n  constructor(\n    private stripe: Stripe,\n    private router: Router,\n    private http: Http,\n    private iab: InAppBrowser,\n    private util: UtilService\n  ) {\n    this.price = 100;\n  }\n\n  ngOnInit() {\n\n  }\n\n  getCards() {\n\n    //**************************************************************************************************************************** */\n    //For Testing we have used localStorage, but you can use ionic native storage\n    //**************************************************************************************************************************** */\n\n    if (localStorage.getItem(\"scuid\") != undefined && localStorage.getItem('scuid') != 'undefined') {\n      let header = new Headers();\n      header.set('access-control-allow-credentials', 'true');\n      header.set('access-control-allow-methods', 'GET, POST, HEAD, OPTIONS, DELETE');\n      header.set('Content-Type', 'application/x-www-form-urlencoded;charset=UTF-8');\n      //Set your secret key here\n      header.set('Authorization', 'Bearer sk_test_pChXbEkjJrFMu6nC80sqiIFP');\n      let option = new RequestOptions({ headers: header });\n      this.http.get('https://api.stripe.com/v1/customers/' + localStorage.getItem(\"scuid\") + '/sources?object=card', option)\n        .subscribe((datas: any) => {\n          let data = datas.json();\n          console.log(data);\n          this.cards = data.data;\n          this.card_token = this.cards[0].id;\n          this.isEnabled = false;\n        }, error => {\n          console.log(error);\n        });\n    } else {\n      this.isEnabled = true;\n    }\n  }\n\n  ionViewWillEnter() {\n    this.getCards();\n  }\n  addNewCard() {\n    this.router.navigate(['add-new-card']);\n  }\n  changeMethod(id) {\n    console.log('change', id);\n    this.card_token = id;\n  }\n  payment() {\n    //Charge API with Private Key and Secret key as Bearer Token\n    this.stripe.setPublishableKey('pk_test_H3zJI5SaNFKCfB1VBNpEYHQ1');\n    let url = 'https://api.stripe.com/v1/charges';\n    let options = {\n      amount: this.price * 100,\n      currency: \"usd\",\n      customer: localStorage.getItem(\"scuid\"),\n      card: this.card_token,\n    }\n    this.post(url, \"sk_test_pChXbEkjJrFMu6nC80sqiIFP\", options);\n  }\n\n  post(url: string, key: string, options: any) {\n    let data = new URLSearchParams(options);\n    for (let i in options)\n      data.set(i, options[i]);\n    let header = new Headers();\n    header.set('access-control-allow-credentials', 'true');\n    header.set('access-control-allow-methods', 'GET, POST, HEAD, OPTIONS, DELETE');\n    header.set('Content-Type', 'application/x-www-form-urlencoded;charset=UTF-8');\n    header.set('Authorization', 'Bearer ' + key);\n    let option = new RequestOptions({ headers: header });\n    let temp = data.toString().split(\"&\");\n    console.log(temp);\n    this.http.post(url, temp.join(\"&\"), option)\n      .subscribe((res: any) => {\n        console.log(res);\n        let data = res.json();\n        console.log('datas', data);\n        this.util.showToast('Payment Success', 'success', 'bottom');\n        // this.openReciepe(data.receipt_url);\n      }, error => {\n        console.log(error);\n      });\n  }\n\n  openReciepe(url) {\n    try {\n      let options: InAppBrowserOptions;\n      options = {\n        location: 'no',\n        clearcache: 'yes',\n        zoom: 'yes',\n        toolbar: 'yes',\n        closebuttoncaption: 'close'\n      };\n      this.iab.create(url, '_blank', options);\n\n    } catch (e) {\n      console.log('error');\n    }\n  }\n}\n"],"sourceRoot":""}